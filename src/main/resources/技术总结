基于推模式实现关注推送
多个tomcat 多个jvm 多个锁（监视器）--->跨进程的锁（分布式锁）（多jvm进程可见 且 互斥 的锁）
真正实现原子性：把几个操作放到一条redis/sql命令里（事务：X）
.intern()返回字符串在常量池中的引用
方法之间互相调用 事务不生效：获取代理对象  （or 注入自己）
乐观锁:在修改数据时加一步判断

基于Redis的分布式锁:
1.利用set nx ex获取锁,设置过期时间,保存线程标识
2.释放锁时先判断是不是自己的

set nx:互斥性
set ex和lua脚本:安全性
Redis集群:高可用 高并发

Redisson:分布式Redis客户端